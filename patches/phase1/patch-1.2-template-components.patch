--- a/templates_enhanced/game_enhanced_optimized.html
+++ b/templates_enhanced/game_main.html
@@ -1,167 +1,33 @@
 <!DOCTYPE html>
 <html lang="zh-CN">
 <head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
     <title>ä¿®ä»™ä¸–ç•Œå¼•æ“</title>
     <!-- å¤–éƒ¨CSSæ–‡ä»¶ -->
     <link rel="stylesheet" href="{{ url_for('static', filename='css/game.css') }}">
 </head>
 <body>
     <!-- é¡¶éƒ¨åŒºåŸŸ -->
-    <div class="header">
-        <h1>ä¿®ä»™ä¸–ç•Œå¼•æ“</h1>
-        <span style="font-size: 12px; color: #666; letter-spacing: 2px;">â€”â€”æ²‰æµ¸å¼æ–‡å­—ä¿®çœŸæ¨¡æ‹Ÿâ€”â€”</span>
-        <div class="dragon-seal"></div>
-    </div>
+    {% include 'components/header.html' %}
 
     <!-- ä¸»ä½“å®¹å™¨ -->
     <div class="main-container">
         <!-- å·¦ä¾§çŠ¶æ€æ  -->
-        <div class="sidebar">
-            <h2>è§’è‰²çŠ¶æ€</h2>
-
-            <div class="status-block">
-                <!-- ... çŠ¶æ€æ˜¾ç¤ºå†…å®¹ ... -->
-            </div>
-
-            <!-- ... å…¶ä»–çŠ¶æ€å— ... -->
-        </div>
+        {% include 'components/sidebar.html' %}
 
         <!-- ä¸­å¤®å™äº‹åŒºåŸŸ -->
-        <div class="narrative-log" id="narrative-log">
-            <div class="loading" id="loading">
-                <div class="loading-spinner"></div>
-                <div style="margin-top: 10px;">æ­£åœ¨å”¤é†’ä¿®ä»™ä¸–ç•Œ...</div>
-            </div>
-        </div>
+        {% include 'components/narrative_log.html' %}
     </div>
 
     <!-- åº•éƒ¨æŒ‡ä»¤åŒº -->
-    <div class="command-section">
-        <div class="input-hint">ğŸ’¡ è¾“å…¥"å¸®åŠ©"æŸ¥çœ‹å…¨éƒ¨å¯ç”¨å‘½ä»¤ï¼ŒæŒ‰Tabé”®æ˜¾ç¤ºå‘½ä»¤æç¤º</div>
-        <div class="input-line">
-            <input type="text" 
-                   class="command-input" 
-                   id="command-input" 
-                   placeholder="è¾“å…¥å‘½ä»¤ï¼Œå¦‚ï¼šæ¢ç´¢ã€æ”»å‡»å¦–å…½ã€ä½¿ç”¨å›å…ƒä¸¹â€¦â€¦" 
-                   onkeydown="handleKeyDown(event)"
-                   onkeyup="handleKeyUp(event)"
-                   autocomplete="off">
-            <button class="command-submit" onclick="executeCommand()" title="å‘é€æŒ‡ä»¤å¹¶åˆ·æ–°ç•Œé¢">æ‰§è¡Œ</button>
-        </div>
-        <!-- è‡ªåŠ¨å®Œæˆæç¤º -->
-        <div class="autocomplete" id="autocomplete"></div>
-    </div>
+    {% include 'components/command_input.html' %}
 
     <!-- æµ®åŠ¨æç¤º -->
     <div class="tooltip" id="tooltip"></div>
 
     <!-- å¤–éƒ¨JSæ–‡ä»¶ -->
     <script src="{{ url_for('static', filename='js/game.js') }}"></script>
-    <!-- å‘½ä»¤å¤„ç†å‡½æ•°ç»‘å®š -->
-    <script>
-        // å…¨å±€å‡½æ•°ç»‘å®šï¼ˆä¸ºäº†å…¼å®¹onclickï¼‰
-        const sendCommand = GameUI.sendCommand;
-    </script>
 </body>
 </html>

## æ–°å»ºç»„ä»¶æ–‡ä»¶è¯´æ˜

ä»¥ä¸‹ç»„ä»¶æ–‡ä»¶éœ€è¦åˆ›å»ºåœ¨ `templates_enhanced/components/` ç›®å½•ä¸‹ï¼š

1. **header.html** - é¡¶éƒ¨æ ‡é¢˜ç»„ä»¶
2. **sidebar.html** - å·¦ä¾§çŠ¶æ€æ ç»„ä»¶ï¼ˆåŒ…å«è§’è‰²çŠ¶æ€ã€ä½ç½®ä¿¡æ¯ã€åŠŸèƒ½å¯¼èˆªç­‰ï¼‰
3. **narrative_log.html** - ä¸­å¤®æ—¥å¿—æ˜¾ç¤ºåŒºåŸŸç»„ä»¶
4. **command_input.html** - åº•éƒ¨å‘½ä»¤è¾“å…¥ç»„ä»¶

è¿™ç§æ‹†åˆ†ä½¿å¾—æ¯ä¸ªç»„ä»¶éƒ½å¯ä»¥ç‹¬ç«‹ç»´æŠ¤å’Œä¿®æ”¹ï¼Œæé«˜äº†ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚
