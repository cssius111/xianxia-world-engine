# 🏛️ 修仙世界拍卖行系统

## 📋 功能概述

修仙世界拍卖行系统是一个全功能的拍卖玩法模块，提供沉浸式的竞拍体验。玩家可以在拍卖行中竞拍珍稀物品，与NPC进行激烈的价格战，体验仇敌恶意抬价、突发事件等丰富的剧情内容。

## ✨ 核心特性

### 🎯 多样化拍卖模式
- **英式拍卖**：传统递增竞价，价高者得
- **荷兰式拍卖**：递减竞价，适合压轴宝物
- **密封投标**：VIP专属，暗标竞争

### 🤖 智能NPC系统
- **5种NPC性格**：
  - 激进型：快速加价，志在必得
  - 保守型：谨慎出价，量力而行
  - 策略型：精打细算，伺机而动
  - 神秘型：深不可测，出手阔绰
  - 暴发户：炫富心理，一掷千金

### 🎭 动态事件系统
- **仇敌竞价**：检测玩家仇恨关系，触发恶意抬价
- **突发劫案**：拍卖中断，需要保护拍品
- **大能降临**：化神期强者参与，改变竞价格局
- **虚假报价**：捣乱者扰乱秩序，增加变数

### 💎 VIP特权系统
- **入场条件**：消费满5万灵石或等级30+
- **专属特权**：
  - 匿名竞拍，隐藏身份
  - 私人包厢，尊贵体验
  - 自动代理，设定上限自动竞价
  - 优先座位，更好视野

### 🗡️ 拍后事件链
- **劫杀事件**：高价值物品引发歹人觊觎
- **结盟机会**：展现财力获得强者青睐
- **黑市线索**：流拍物品的神秘去向
- **仇恨升级**：竞拍失败可能结下新仇

## 🎮 使用方法

### 基础命令
```
拍卖行         - 进入拍卖行大厅
参加拍卖       - 参加当前拍卖会
出价 [金额]    - 竞拍出价
放弃          - 放弃当前物品
离开拍卖行     - 离开拍卖行
拍卖帮助       - 查看详细规则
```

### 竞拍流程
1. **进入拍卖行**：支付100灵石入场费
2. **参加拍卖会**：等待拍品展示
3. **评估价值**：查看物品信息和起拍价
4. **参与竞价**：选择出价、观望或放弃
5. **成交结算**：支付灵石获得物品
6. **小心离场**：注意可能的劫杀

### 竞拍技巧
- 💰 **理性评估**：不要被情绪左右，设定心理价位
- 👥 **观察对手**：注意其他竞拍者的出价模式
- ⚔️ **提防仇敌**：仇敌可能恶意抬价让你大出血
- 🛡️ **安全第一**：高价物品拍得后要谨慎离场

## 📦 物品等级

### 低阶物品（40%）
- 百年灵芝、聚灵符、火焰刀
- 起拍价：300-800灵石
- 事件概率：低

### 中阶物品（30%）
- 玄铁飞剑、凝婴丹、混元鼎
- 起拍价：5000-10000灵石
- 事件概率：中

### 高阶物品（20%）
- 上古功法、龙纹炼丹炉
- 起拍价：30000-50000灵石
- 事件概率：高

### 压轴物品（10%）
- 渡劫法宝、万年雪莲
- 起拍价：80000-100000灵石
- 事件概率：极高

## 🔧 技术实现

### 文件结构
```
xwe/features/
├── auction_system.py        # 核心拍卖系统
├── auction_commands.py      # 命令处理器
├── interactive_auction.py   # 交互式竞拍
└── auction_integration.py   # 集成指南

xwe/data/auction/
├── auction_config.json      # 拍卖行配置
├── auction_items.json       # 拍卖物品数据
└── auction_npcs.json        # NPC数据
```

### 核心类
- `AuctionSystem`：拍卖系统主类
- `AuctionItem`：拍卖物品数据结构
- `Bidder`：竞拍者（NPC）数据结构
- `InteractiveAuction`：交互式拍卖处理器
- `AuctionCommandHandler`：命令处理器

## 🎯 集成指南

### 1. 添加到游戏命令系统
```python
from xwe.features.auction_commands import auction_command_handler

# 在游戏主循环中
if command in ["拍卖行", "参加拍卖", "出价"]:
    result = auction_command_handler.handle_auction_command(player, command, params)
```

### 2. 添加拍卖行地点
```python
# 在地图数据中添加
{
    "id": "tiannan_auction_house",
    "name": "天宝拍卖行",
    "type": "special",
    "connections": ["tiannan_fangshi"]
}
```

### 3. 触发拍卖事件
```python
# 在特定条件下触发拍卖会
if player.location == "tiannan_auction_house":
    auction_system.start_auction(player, "regular")
```

## 🚀 扩展方向

### 计划中的功能
- 📅 **定期拍卖会**：每月大型拍卖会
- 🎁 **委托拍卖**：玩家可委托拍卖自己的物品
- 🏆 **拍卖成就**：竞拍相关的成就系统
- 💱 **多币种支持**：灵石、妖丹、贡献点
- 🌐 **跨服拍卖**：不同服务器联合拍卖

### 可定制内容
- 修改物品数据添加新拍品
- 调整NPC性格和对话
- 自定义特殊事件
- 配置价格区间和概率

## 📝 注意事项

1. **平衡性**：物品价格需要与游戏经济平衡
2. **随机性**：避免过度随机导致体验不佳
3. **交互性**：保持适度的交互频率
4. **剧情性**：事件触发要符合逻辑

## 🎮 测试方法

运行测试脚本：
```bash
python test_auction_system.py
```

测试内容包括：
- 基础拍卖流程
- 交互式竞拍
- 仇敌系统
- 拍后事件
- VIP功能

---

**版本**: 1.0.0  
**作者**: XianXia World Engine Team  
**更新日期**: 2025-06-04

祝您在拍卖行中满载而归！💎✨
